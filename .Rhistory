usethis::use_mit_license()
?stringr::str_replace
#' @param description_col The desired name for the description column in the
#' results dataframe. If each result is from a phenotype associated gene list,
#' the description column would be "phenotype". The filenames are used to give
#' values to this column.
#' @example \dontrun{
#' results_dir = "EWCE_results_folder"
#' description_col = "phenotype"
#' merge_results(results_dir,descriptoin_col)}
#' @retuns All results merged <data.frame>
#' @export
merge_results <- function(results_dir = "results", description_col = "phenotype") {
results_merged <- data.frame()
for (f in list.files(results_dir)) {
cur = readRDS(paste0(results_dir,"/",f))$results
cur[description_col] <- stringr::str_replace(f,".rds","")
results_merged <- rbind(results_merged,cur)
}
return(results_merged)
}
merge_results("C:\Users\bobby\Desktop\all_results_missingphenos")
extra_results<- merge_results("C:/Users/bobby/Desktop/all_results_missingphenos")
extra_results<- merge_results("C:/Users/bobby/Desktop/all_results_missingphenos/results_missing")
all_results_merged <- readRDS(stringr::str_replace("C:\Users\bobby\Desktop\sci\GitHub\rare_disease_ewce\data\Descartes_All_Results_extras.rda","\","/""))
all_results_merged <- readRDS("C:\Users\bobbyDesktop/sci/GitHub/rare_disease_ewce/data/Descartes_All_Results_extras.rda")
all_results_merged <- readRDS("C:/Users/bobbyDesktop/sci/GitHub/rare_disease_ewce/data/Descartes_All_Results_extras.rda")
all_results_merged <- readRDS("C:/Users/bobby/Desktop/sci/GitHub/rare_disease_ewce/data/Descartes_All_Results_extras.rda")
all_results_merged <- load("C:/Users/bobby/Desktop/sci/GitHub/rare_disease_ewce/data/Descartes_All_Results_extras.rda")
load("C:/Users/bobby/Desktop/sci/GitHub/rare_disease_ewce/data/Descartes_All_Results_extras.rda")
length(unique(all_results_merged$list))
extra_results<- merge_results("C:/Users/bobby/Desktop/all_results_missingphenos/results_missing","list")
View(extra_results)
all_results_merged <- rbind(all_results_merged,extra_results)
View(all_results_merged)
#' @param description_col The desired name for the description column in the
#' results dataframe. If each result is from a phenotype associated gene list,
#' the description column would be "phenotype". The filenames are used to give
#' values to this column.
#' @example \dontrun{
#' results_dir = "EWCE_results_folder"
#' description_col = "phenotype"
#' merge_results(results_dir,descriptoin_col)}
#' @retuns All results merged <data.frame>
#' @export
merge_results <- function(results_dir = "results", description_col = "phenotype") {
results_merged <- data.frame()
for (f in list.files(results_dir)) {
cur = readRDS(paste0(results_dir,"/",f))$results
cur[description_col] <- stringr::str_replace(f,".rds","")
results_merged <- rbind(results_merged,cur)
}
return(results_merged)
}
extras <- merge_results("C:/Users/bobby/Desktop/all_results_missingphenos/results_missing","list")
load("C:/Users/bobby/Desktop/sci/GitHub/rare_disease_ewce/data/Descartes_All_Results_extras.rda")
extras$q <- NA
library(ontologyIndex)
extras$HPOID <- hpo$id[match(extras$list, hpo$name)]
load(hpo)
data(hpo)
data(hpo)
extras$HPOID <- hpo$id[match(extras$list, hpo$name)]
View(extras)
phenotype_to_genes = read.delim("C:/Users/bobby/Desktop/sci/GitHub/rare_disease_ewce/data/phenotype_to_genes.txt", skip = 1, header=FALSE)
colnames(phenotype_to_genes) = c("ID", "Phenotype", "EntrezID", "Gene",
"Additional", "Source", "LinkID")
getID <- function (p, phenotype_to_genes=phenotype_to_genes) {
id <- unique(phenotype_to_genes$ID[phenotype_to_genes$Phenotype == p])
return(id)
}
View(all_results_merged)
extras <- merge_results("C:/Users/bobby/Desktop/all_results_missingphenos/results_missing","list")
load("C:/Users/bobby/Desktop/sci/GitHub/rare_disease_ewce/data/Descartes_All_Results_extras.rda")
extras$q <- NA
library(ontologyIndex)
data(hpo)
phenotype_to_genes = read.delim("C:/Users/bobby/Desktop/sci/GitHub/rare_disease_ewce/data/phenotype_to_genes.txt", skip = 1, header=FALSE)
colnames(phenotype_to_genes) = c("ID", "Phenotype", "EntrezID", "Gene",
"Additional", "Source", "LinkID")
getID <- function (p, phenotype_to_genes=phenotype_to_genes) {
id <- unique(phenotype_to_genes$ID[phenotype_to_genes$Phenotype == p])
return(id)
}
extras$HPO_id <- getID(extras$list,phenotype_to_genes)
extras$HPO_id <- apply(extras$list,FUN=getID)
extras$HPO_id <- apply(X = extras$list,FUN=getID)
View(extras)
extras <- merge_results("C:/Users/bobby/Desktop/all_results_missingphenos/results_missing","list")
extras$q <- NA
getID <- function (p, phenotype_to_genes=phenotype_to_genes) {
id <- unique(phenotype_to_genes$ID[phenotype_to_genes$Phenotype == p])
return(id)
}
extras$HPO_id <- getID(extras$list,phenotype_to_genes)
getID <- function (p, phenotype_to_genes=phenotype_to_genes) {
id <- unique(phenotype_to_genes$ID[phenotype_to_genes$Phenotype == p][1])
return(id)
}
extras$HPO_id <- getID(extras$list,phenotype_to_genes)
getID <- function (p, phenotype_to_genes=phenotype_to_genes) {
id <- phenotype_to_genes$ID[phenotype_to_genes$Phenotype == p][1]
return(id)
}
extras$HPO_id <- getID(extras$list,phenotype_to_genes)
View(extras)
print(length(unique(all_results_merged$list)))
print(length(unique(extras$list)))
